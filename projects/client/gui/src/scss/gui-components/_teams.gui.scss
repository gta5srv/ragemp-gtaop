@import '../config/fonts';
@import '../config/breakpoints';
@import '../config/container';
@import '../core/util';

$teams-count: 3;
$svg-stroke-width: 2px;

.gui-component.gui-component-teams {
  @extend %centered;

  user-select: none;

  width: $container-width;
  height: 70%;

  .teams-list {
    display: flex;
    align-items: stretch;
    height: 100%;
    transform: translateX(33.33% / $teams-count);

    .teams-item-container {
      position: relative;
      box-sizing: border-box;
      width: 33.33%;
      height: 100%;

      pointer-events: none;

      @for $i from 1 through $teams-count {
        &:nth-child(#{$i}) {
          transform: translateX(#{($i - 1) * -35%});
        }
      }

      .teams-item {
        height: 100%;
        cursor: pointer;
        pointer-events: auto;

        &,
        .teams-bg {
          clip-path: polygon(0% 100%, 35% 0%, 100% 0%, 65% 100%);
        }

        .teams-bg {
          @extend %centered;

          background: center center;
          background-size: cover;

          width: 100%;
          height: 100%;

          filter: grayscale(100%) contrast(115%);
          transition: 0.4s;
        }

        .teams-content {
          position: relative;
          height: 100%;

          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;

          text-shadow: 0 1px 1px rgba(#000, 0.6);

          &:before {
            @extend %cover;

            content: '';
            background: rgba(#3b98be, 0.6);

            visibility: hidden;
            opacity: 0;
            transition: 0.5s;
          }

          .teams-content-inner {
            position: relative;

            @include headings {
              font-family: Pacifico;
              text-shadow: 0 2px 1px rgba(#000, 0.6);
            }

            h2 {
              position: relative;
              margin: 20px 0;

              visibility: hidden;
              opacity: 0;
              transition: 0.5s;
              transform: translateY(-100%);

              font-size: floor($font-size * 3);
              font-style: italic;
              color: #fbc845;
            }

            .teams-content-extra {
              height: auto;
              max-height: 0;
              // height: 0;
              opacity: 0;
              overflow: hidden;

              color: #fff;
              line-height: 2;
              font-size: floor($font-size * 0.85);

              transition: 0.5s;

              span {
                color: #fbc845;
              }

              button {
                display: inline-block;
                width: auto;
                margin: 20px 0;
                line-height: 1;
              }
            }
          }
        }

        .teams-info {
          position: absolute;
          bottom: 0;
          left: 0;
          width: calc(67%);

          font-size: floor($font-size * 0.75);
          text-align: center;

          padding: 1em 0;

          background: #fbc845;
          color: #222;

          transform: translateY(100%);
          transition: transform 0.4s;
        }

        svg {
          @extend %centered;
          width: 110%;
          height: 110%;
          transition: width 0.5s, height 0.5s;
          z-index: 1;
          pointer-events: none;
        }

        &:hover {
          .teams-content {
            &:before, h2 {
              visibility: visible;
              opacity: 1;
            }
          }

          .teams-bg {
            width: 105%;
            height: 105%;

            filter: grayscale(25%) contrast(150%);
          }

          .teams-content {
            h2 {
              transform: translateY(0);
            }
          }

          .teams-info {
            transform: translateY(0);
          }

          svg {
            width: 100%;
            height: calc(100% + #{$svg-stroke-width * 2});
          }
        }

        &.clicked {
          .teams-content {
            .teams-content-inner {
              .teams-content-extra {
                max-height: 100px;
                opacity: 1;
              }
            }
          }
        }
      }

      &.teams-item-container-disabled {
        .teams-item {
          .teams-bg {
            filter: grayscale(100%) contrast(30%);
          }

          .teams-content {
            filter: grayscale(100%);

            .teams-content-extra {
              display: none;
            }
          }

          svg {
            display: none;
          }

          .teams-info {
            background: lighten(red, 20%);
          }

          &:after {
            content: '';
            @extend %cover;
            background: url(../img/alertw.svg) center center no-repeat;
            background-size: 20%;
            opacity: 0.4;
          }

          &:hover {
            &:after {
              opacity: 0;
            }
          }
        }
      }

      &.teams-item-container-attention {
        z-index: 1;

        .teams-item {
          animation-name: pulse;

          .teams-bg {
            animation-name: yellowing;
          }

          &,
          .teams-bg,
          .teams-info p {
            animation-duration: 1.5s;
            animation-fill-mode: both;
            animation-iteration-count: infinite;
          }

          &:hover {
            &, .teams-bg {
              animation: none;
            }

            .teams-info p {
              animation-name: pulsestrong;
            }
          }
        }
      }
    }
  }

  @media (min-width: #{$md}) {
    width: $container-width-md;
  }

  @media (min-width: #{$lg}) {
    width: 100%;
  }
}
